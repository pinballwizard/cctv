upstream wsgi_phone {
    server unix:/run/uwsgi/cctv.sock;
}

server {
    listen       80;
    listen       [::]:80;
    server_name  default;

    charset utf8;
    client_max_body_size 75M;
    autoindex off;

    access_log  /var/log/nginx/cctv_access.log;
    error_log   /var/log/nginx/cctv_error.log error;

    set $project_home /home/itadmin/cctv;

    location /static {
        alias $project_home/static;
    }
    location /media {
        alias $project_home/media;
    }
    location / {
        try_files $uri @django;
    }
    location @django {
        uwsgi_pass  wsgi_phone;
        include     uwsgi_params;
    }
}
